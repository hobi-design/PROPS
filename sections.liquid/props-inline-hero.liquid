{%- comment -%}
  Inline Image Hero | PROPS â€” https://props.hobi.design/
{%- endcomment -%}

{% schema %}
{
  "name": "Inline Image Hero",
  "tag": "section",
  "class": "props-inline-image-hero",
  "disabled_on": {
    "groups": ["header", "custom.popups"]
  },
  "settings": [
    {
      "type": "header",
      "content": "Content"
    },
    {
      "type": "text",
      "id": "heading",
      "label": "Heading",
      "default": "Use the tags [img1] to add inline images [img2] here",
      "info": "Use [img1], [img2], etc. to place inline images. Each tag maps to the corresponding Inline Image block."
    },
    {
      "type": "richtext",
      "id": "description",
      "label": "Description",
      "default": "<p>Lorem ipsum dolor sit amet, consectetur adipiscing elit. Suspendisse varius enim in eros elementum tristique.</p>"
    },
    {
      "type": "header",
      "content": "Typography"
    },
    {
      "type": "range",
      "id": "heading_size_desktop",
      "min": 8,
      "max": 120,
      "step": 2,
      "unit": "px",
      "label": "Heading Size",
      "default": 64
    },
    {
      "type": "range",
      "id": "heading_size_mobile",
      "min": 20,
      "max": 80,
      "step": 2,
      "unit": "px",
      "label": "Heading Size (Mobile)",
      "default": 48
    },
    {
      "type": "range",
      "id": "body_size_desktop",
      "min": 12,
      "max": 24,
      "step": 1,
      "unit": "px",
      "label": "Description Size",
      "default": 16
    },
    {
      "type": "range",
      "id": "body_size_mobile",
      "min": 12,
      "max": 20,
      "step": 1,
      "unit": "px",
      "label": "Description Size (Mobile)",
      "default": 14
    },
    {
      "type": "header",
      "content": "Layout"
    },
    {
      "type": "range",
      "id": "content_width_desktop",
      "min": 40,
      "max": 100,
      "step": 2,
      "unit": "%",
      "label": "Content Width",
      "default": 70
    },
    {
      "type": "range",
      "id": "content_width_mobile",
      "min": 80,
      "max": 100,
      "step": 2,
      "unit": "%",
      "label": "Content Width (Mobile)",
      "default": 92
    },
    {
      "type": "select",
      "id": "text_alignment",
      "label": "Text Alignment",
      "options": [
        { "value": "left", "label": "Left" },
        { "value": "center", "label": "Center" }
      ],
      "default": "center"
    },
    {
      "type": "header",
      "content": "Inline Image Settings"
    },
    {
      "type": "range",
      "id": "image_radius",
      "min": 0,
      "max": 24,
      "step": 2,
      "unit": "px",
      "label": "Image Border Radius",
      "default": 4
    },
    {
      "type": "header",
      "content": "Button Style"
    },
    {
      "type": "range",
      "id": "button_radius",
      "min": 0,
      "max": 30,
      "step": 2,
      "unit": "px",
      "label": "Button Border Radius",
      "default": 4
    },
    {
      "type": "header",
      "content": "Section Padding"
    },
    {
      "type": "range",
      "id": "padding_vertical_desktop",
      "min": 0,
      "max": 120,
      "step": 4,
      "unit": "px",
      "label": "Vertical Padding",
      "default": 80
    },
    {
      "type": "range",
      "id": "padding_horizontal_desktop",
      "min": 0,
      "max": 120,
      "step": 4,
      "unit": "px",
      "label": "Horizontal Padding",
      "default": 40
    },
    {
      "type": "range",
      "id": "padding_vertical_mobile",
      "min": 0,
      "max": 80,
      "step": 4,
      "unit": "px",
      "label": "Vertical Padding (Mobile)",
      "default": 40
    },
    {
      "type": "range",
      "id": "padding_horizontal_mobile",
      "min": 0,
      "max": 80,
      "step": 4,
      "unit": "px",
      "label": "Horizontal Padding (Mobile)",
      "default": 20
    },
    {
      "type": "header",
      "content": "Colors"
    },
    {
      "type": "color",
      "id": "bg_color",
      "label": "Background Color",
      "default": "#FFFFFF"
    },
    {
      "type": "color",
      "id": "text_color",
      "label": "Text Color",
      "default": "#121212"
    }
  ],
  "blocks": [
    {
      "type": "inline_image",
      "name": "Inline Image",
      "settings": [
        {
          "type": "image_picker",
          "id": "image",
          "label": "Image"
        },
        {
          "type": "text",
          "id": "alt_text",
          "label": "Alt Text"
        },
        {
          "type": "url",
          "id": "link",
          "label": "Link"
        }
      ]
    },
    {
      "type": "button",
      "name": "Button",
      "settings": [
        {
          "type": "text",
          "id": "label",
          "label": "Label",
          "default": "Button"
        },
        {
          "type": "url",
          "id": "link",
          "label": "Link"
        },
        {
          "type": "select",
          "id": "style",
          "label": "Style",
          "options": [
            { "value": "filled", "label": "Filled" },
            { "value": "outline", "label": "Outline" }
          ],
          "default": "filled"
        },
        {
          "type": "header",
          "content": "Colors"
        },
        {
          "type": "color",
          "id": "button_bg",
          "label": "Button Color",
          "default": "#121212"
        },
        {
          "type": "color",
          "id": "button_text",
          "label": "Text Color",
          "default": "#FFFFFF",
          "info": "Applies to filled style. Outline uses Button Color for text."
        },
        {
          "type": "color",
          "id": "hover_bg",
          "label": "Hover Color",
          "default": "#333333"
        },
        {
          "type": "color",
          "id": "hover_text",
          "label": "Hover Text Color",
          "default": "#FFFFFF"
        }
      ]
    }
  ],
  "presets": [
    {
      "name": "Inline Image Hero",
      "blocks": [
        {
          "type": "inline_image"
        },
        {
          "type": "inline_image"
        },
        {
          "type": "button",
          "settings": {
            "label": "Button", "style": "filled",
            "button_bg": "#121212", "button_text": "#FFFFFF",
            "hover_bg": "#333333", "hover_text": "#FFFFFF"
          }
        },
        {
          "type": "button",
          "settings": {
            "label": "Button", "style": "outline",
            "button_bg": "#121212", "button_text": "#FFFFFF",
            "hover_bg": "#121212", "hover_text": "#FFFFFF"
          }
        }
      ]
    }
  ]
}
{% endschema %}

{% style %}
  .props-inline-image-hero-{{ section.id }} {
    background-color: {{ section.settings.bg_color }};
    color: {{ section.settings.text_color }};
    padding: {{ section.settings.padding_vertical_mobile }}px {{ section.settings.padding_horizontal_mobile }}px;

    --props-heading-size: {{ section.settings.heading_size_mobile }}px;
    --props-body-size: {{ section.settings.body_size_mobile }}px;
    --props-content-width: {{ section.settings.content_width_mobile }}%;
    --props-image-radius: {{ section.settings.image_radius }}px;
    --props-button-radius: {{ section.settings.button_radius }}px;
  }

  @media screen and (min-width: 750px) {
    .props-inline-image-hero-{{ section.id }} {
      padding: {{ section.settings.padding_vertical_desktop }}px {{ section.settings.padding_horizontal_desktop }}px;

      --props-heading-size: {{ section.settings.heading_size_desktop }}px;
      --props-body-size: {{ section.settings.body_size_desktop }}px;
      --props-content-width: {{ section.settings.content_width_desktop }}%;
    }
  }

  .props-inline-image-hero-container {
    max-width: var(--page-width, 1200px);
    margin: 0 auto;
  }

  .props-inline-image-hero-content {
    width: var(--props-content-width);
    max-width: 100%;
    margin: {% if section.settings.text_alignment == 'center' %}0 auto{% else %}0{% endif %};
    text-align: {{ section.settings.text_alignment }};
  }

  .props-inline-image-hero-heading {
    margin: 0 0 16px 0;
    font-size: var(--props-heading-size);
    line-height: 1.15;
    font-weight: 700;
  }

  .props-inline-image-hero-inline-img {
    display: inline-block;
    height: 1.15em;
    height: 1lh;
    width: auto;
    vertical-align: middle;
    border-radius: var(--props-image-radius);
    object-fit: cover;
  }

  .props-inline-image-hero-inline-link {
    display: inline-block;
    height: 1.15em;
    height: 1lh;
    vertical-align: middle;
    border-radius: var(--props-image-radius);
    overflow: hidden;
    line-height: 0;
  }

  .props-inline-image-hero-inline-link .props-inline-image-hero-inline-img {
    position: static;
    top: auto;
    border-radius: 0;
  }

  .props-inline-image-hero-description {
    margin: 0;
  }

  .props-inline-image-hero-description p {
    margin: 0 0 16px 0;
    font-size: var(--props-body-size);
    line-height: 1.5;
    opacity: 0.8;
  }

  .props-inline-image-hero-description p:last-child {
    margin-bottom: 0;
  }

  .props-inline-image-hero-buttons {
    display: flex;
    gap: 12px;
    justify-content: {{ section.settings.text_alignment }};
    flex-wrap: wrap;
    margin-top: 28px;
  }

  .props-inline-image-hero-btn {
    display: inline-flex;
    align-items: center;
    justify-content: center;
    padding: 12px 24px;
    font-size: 15px;
    font-weight: 500;
    text-decoration: none;
    border-radius: var(--props-button-radius);
    cursor: pointer;
    border: 1.5px solid var(--btn-bg);
    line-height: 1;
    transition: background-color 0.3s ease, color 0.3s ease, border-color 0.3s ease;
  }

  .props-inline-image-hero-btn-filled {
    background-color: var(--btn-bg);
    color: var(--btn-text);
  }

  .props-inline-image-hero-btn-outline {
    background-color: transparent;
    color: var(--btn-bg);
  }

  @media (hover: hover) {
    .props-inline-image-hero-btn:hover {
      background-color: var(--btn-hover-bg);
      color: var(--btn-hover-text);
      border-color: var(--btn-hover-bg);
    }
  }
{% endstyle %}

<div class="props-inline-image-hero-{{ section.id }}" data-section-type="props-inline-image-hero" data-section-id="{{ section.id }}">
  <div class="page-width props-inline-image-hero-container">
    <div class="props-inline-image-hero-content">

      {% if section.settings.heading != blank %}
        {%- liquid
          assign inline_images = section.blocks | where: 'type', 'inline_image'
          assign processed_heading = section.settings.heading | escape
          for img_block in inline_images
            assign img_index = forloop.index
            assign placeholder_tag = '[img' | append: img_index | append: ']'
            assign has_link = false
            if img_block.settings.link != blank
              assign has_link = true
            endif
            if img_block.settings.image != blank
              assign img_alt = img_block.settings.alt_text | default: img_block.settings.image.alt | escape
              assign img_src = img_block.settings.image | image_url: height: 200
              if has_link
                assign img_html = '<a href="' | append: img_block.settings.link | append: '" class="props-inline-image-hero-inline-link"><img src="' | append: img_src | append: '" alt="' | append: img_alt | append: '" class="props-inline-image-hero-inline-img" loading="eager"></a>'
              else
                assign img_html = '<img src="' | append: img_src | append: '" alt="' | append: img_alt | append: '" class="props-inline-image-hero-inline-img" loading="eager">'
              endif
            else
              assign placeholder_src = 'https://static.photos/monochrome/200x120.webp'
              if has_link
                assign img_html = '<a href="' | append: img_block.settings.link | append: '" class="props-inline-image-hero-inline-link"><img src="' | append: placeholder_src | append: '" alt="Placeholder" class="props-inline-image-hero-inline-img" loading="eager"></a>'
              else
                assign img_html = '<img src="' | append: placeholder_src | append: '" alt="Placeholder" class="props-inline-image-hero-inline-img" loading="eager">'
              endif
            endif
            assign processed_heading = processed_heading | replace: placeholder_tag, img_html
          endfor
        -%}
        <h1 class="props-inline-image-hero-heading">{{ processed_heading }}</h1>
      {% endif %}

      {% if section.settings.description != blank %}
        <div class="props-inline-image-hero-description rte">{{ section.settings.description }}</div>
      {% endif %}

      {%- liquid
        assign has_buttons = false
        for block in section.blocks
          if block.type == 'button' and block.settings.label != blank
            assign has_buttons = true
            break
          endif
        endfor
      -%}

      {% if has_buttons %}
        <div class="props-inline-image-hero-buttons">
          {% for block in section.blocks %}
            {% if block.type == 'button' and block.settings.label != blank %}
              <a
                href="{{ block.settings.link | default: '#' }}"
                class="props-inline-image-hero-btn props-inline-image-hero-btn-{{ block.settings.style }}"
                style="--btn-bg: {{ block.settings.button_bg }}; --btn-text: {{ block.settings.button_text }}; --btn-hover-bg: {{ block.settings.hover_bg }}; --btn-hover-text: {{ block.settings.hover_text }};"
                {{ block.shopify_attributes }}
              >
                {{ block.settings.label | escape }}
              </a>
            {% endif %}
          {% endfor %}
        </div>
      {% endif %}

    </div>
  </div>
</div>
